
<!-- ============================================ -->
<!-- FILE 12: public/admin.html -->
<!-- Location: college-chat/public/admin.html -->
<!-- Admin dashboard to track users -->
<!-- ============================================ -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body class="admin-page">
  <div class="admin-container">
    <div class="admin-header">
      <h1>ğŸ‘¨â€ğŸ’¼ Admin Dashboard</h1>
      <button onclick="refreshData()" class="btn-icon">ğŸ”„</button>
    </div>

    <div id="loginBox" class="admin-login">
      <h2>Admin Login</h2>
      <input 
        type="password" 
        id="adminPassword" 
        placeholder="Enter admin password"
        onkeypress="handleAdminKeyPress(event)"
      >
      <button onclick="adminLogin()" class="btn btn-primary">Login</button>
    </div>

    <div id="adminContent" style="display: none;">
      <!-- Stats Cards -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">ğŸ‘¥</div>
          <div class="stat-value" id="totalUsers">0</div>
          <div class="stat-label">Total Users</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸŸ¢</div>
          <div class="stat-value" id="onlineUsers">0</div>
          <div class="stat-label">Online Now</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸ’¬</div>
          <div class="stat-value" id="totalMessages">0</div>
          <div class="stat-label">Total Messages</div>
        </div>
      </div>

      <!-- Tabs -->
      <div class="admin-tabs">
        <button class="tab-btn active" onclick="showTab('users')">Users</button>
        <button class="tab-btn" onclick="showTab('messages')">Messages</button>
        <button class="tab-btn" onclick="showTab('search')">Search User</button>
      </div>

      <!-- Users Tab -->
      <div id="usersTab" class="tab-content active">
        <h2>All Users</h2>
        <div class="table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Avatar</th>
                <th>Nickname</th>
                <th>Phone Number</th>
                <th>Year</th>
                <th>Branch</th>
                <th>Division</th>
                <th>Status</th>
                <th>Last Login</th>
              </tr>
            </thead>
            <tbody id="usersTableBody">
              <!-- Users will be loaded here -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Messages Tab -->
      <div id="messagesTab" class="tab-content">
        <h2>Recent Messages</h2>
        <div class="table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Time</th>
                <th>Avatar</th>
                <th>Nickname</th>
                <th>Phone</th>
                <th>Room</th>
                <th>Message</th>
              </tr>
            </thead>
            <tbody id="messagesTableBody">
              <!-- Messages will be loaded here -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Search Tab -->
      <div id="searchTab" class="tab-content">
        <h2>Search User by Phone</h2>
        <div class="search-box">
          <input 
            type="tel" 
            id="searchPhone" 
            placeholder="Enter phone number (10 digits)"
            maxlength="10"
          >
          <button onclick="searchUser()" class="btn btn-primary">Search</button>
        </div>
        <div id="searchResults"></div>
      </div>
    </div>
  </div>

  <script src="js/admin.js"></script>
</body>
<!-- Add this in the Messages Tab section -->
<div class="admin-actions" style="margin: 20px 0;">
  <button onclick="clearAllMessages()" class="btn btn-danger">
    ğŸ—‘ï¸ Clear All Messages
  </button>
  <button onclick="clearRoomMessages('general')" class="btn btn-secondary">
    Clear General
  </button>
  <button onclick="clearRoomMessages('confession')" class="btn btn-secondary">
    Clear Confessions
  </button>
  <button onclick="clearRoomMessages('rant')" class="btn btn-secondary">
    Clear Rants
  </button>
  <button onclick="clearOldMessages(7)" class="btn btn-secondary">
    Clear 7+ Days Old
  </button>
</div>
<!-- Add to tabs section -->
<button class="tab-btn" onclick="showTab('feedback')">ğŸ“ Feedback</button>

<!-- Add this tab content -->
<div id="feedbackTab" class="tab-content">
  <h2>User Feedback</h2>
  
  <div style="display:flex; gap:15px; margin-bottom:20px;">
    <div style="flex:1; background:linear-gradient(135deg, #667eea 0%, #764ba2 100%); color:white; padding:20px; border-radius:12px; text-align:center;">
      <div style="font-size:32px; font-weight:700;" id="totalFeedback">0</div>
      <div style="font-size:14px; opacity:0.9;">Total</div>
    </div>
    <div style="flex:1; background:linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color:white; padding:20px; border-radius:12px; text-align:center;">
      <div style="font-size:32px; font-weight:700;" id="newFeedback">0</div>
      <div style="font-size:14px; opacity:0.9;">New</div>
    </div>
    <div style="flex:1; background:linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color:white; padding:20px; border-radius:12px; text-align:center;">
      <div style="font-size:32px; font-weight:700;" id="resolvedFeedback">0</div>
      <div style="font-size:14px; opacity:0.9;">Resolved</div>
    </div>
  </div>
  
  <table class="admin-table">
    <thead>
      <tr>
        <th>Time</th>
        <th>User</th>
        <th>Phone</th>
        <th>Type</th>
        <th>Feedback</th>
        <th>Status</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="feedbackTable">
      <tr><td colspan="7" style="text-align:center;">Loading...</td></tr>
    </tbody>
  </table>
</div>
</html>
